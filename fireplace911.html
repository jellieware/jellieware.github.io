<!DOCTYPE html>
<html lang="en" >
<head>
	<link rel="icon" type="image/png" href="/favicon-48x48.png" sizes="48x48" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
  <meta charset="UTF-8">
  <title>Lexs Pixel Fireplace</title>
</head>
<style>
	* {
	margin: 0 !important;
	padding: 0 !important; 
	}
	cnv {
    
              position: absolute;
 
            bottom:0;
}
html, body  {
width: 100%;
height: 100%;
	background: #000;
	

	
	 
	}
canvas {
padding: 0;
    margin: auto !important;
    display: block;
    position: absolute; 
    bottom: 0;
    left: 0 !important;
    right: 0 !important;
    z-index: 1
 
    
}
canvas {
  

  width: auto;
  
}
</style>
<body>
<!-- partial:index.partial.html -->

<!-- partial -->
  <script>
const getRandomInt = (base = 10) => {
  return Math.floor(Math.random() * base)
}

var _seed = 1234;
function middleSquare(seed){
   _seed = (seed)?seed:_seed;
   var sq = (_seed * _seed) + '';
    _seed = parseInt(sq.substring(0,4));
   return parseFloat('0.' + _seed);
 // return Math.random();
}
var animationFrame = window.requestAnimationFrame ||
		window.webkitRequestAnimationFrame ||
		window.mozRequestAnimationFrame ||
		window.oRequestAnimationFrame ||
		window.msRequestAnimationFrame;
var display = "";
var wavewait = 0;
var playonce =0;
var hashorizon = 0;
var bounce = 0;
var firebounce = 0;
var we = 0;
var he = 0;
var flamemod =0;
var holdflamemod=0;
var xp = 0;
var fl = 0;
var shade1, shade2, shade3, shade4, shade5, shade6, shade7, shade8, shade9;
var sat1, sat2, sat3, sat4, sat5, sat6, sat7, sat8, sat9;
var bri1, bri2, bri3, bri4, bri5, bri6,  bri7, bri8, bri9;
var modalpha;
var sunsetpalette1=["355", "4", "6", "8", "16",  "32", "48", "56", "56"]
var sunsetpalette2=["59%", "67%", "67%", "74%", "74%", "82%", "79%", "87%", "87"]
var sunsetpalette3=["13%", "18%", "27%",  "35%", "43%", "47%", "82%", "62%", "62"]
var anarchy1=["21", "35", "35", "41", "41", "44", "      53",  "48", "56"]
var anarchy2=["100%", "85%", "94%", "86%", "94%", "96%", "82%", "79%", "87%"]
var anarchy3=["41%", "50%", "52%", "49%", "52%",  "55%", "53%", "52%", "52%"]
var neon1=["120", "120", "120", "120", "120", "140", "134",  "129", ""]
var neon2=["100%", "100%", "100%", "100%", "100%", "80%", "100%", "97%", ""]
var neon3=["81%", "20%", "30%", "40%", "50%",  "50%", "72%", "88%", ""]
var classic1=["10", "19", "25", "30", "35", "44", "50",  "55", ""]
var classic2=["100%", "99%", "96%", "91%", "90%", "92%", "92%", "100%", ""]
var classic3=["55%", "48%", "46%", "52%", "54%",  "55%", "56%", "60%", ""]
 var updown=0;
var loopy=0;
var fps = 12;
var tr1 = 0;
var tr2 = 0;
var tr3 = 0;
var tr4 = 0;
var tr5 = 0;
var tr6 = 0;
var tr7 = 0;
var tr8 = 0;
var tr9 = 0;
var tr10 = 0;
var tr11 = 0;
var tr12 = 0;
var tr13 = 0;
var tr14 = 0;
var tr15 = 0;
var tr16 = 0;
var holder = 0;
var catchlogs=0;
var holding = 0;
var currlim = 0;
var lights = 0;
var burnin=0;
var reallyslowwood=0;
var bouncy=0;
var flame1 = 0;
var holdlogsx=-336;
var holdlogs=0;
var flame2 = 0;
 var palettenames1 = [sunsetpalette1, anarchy1, neon1, classic1]
 var palettenames2 = [sunsetpalette2, anarchy2, neon2, classic2]
 var palettenames3= [sunsetpalette3, anarchy3, neon3, classic3]
            shade1 = palettenames1[0][1];
        	sat1 = palettenames2[0][1];
            bri1 = palettenames3[0][1];
        
        
			shade2 = palettenames1[0][2];
			sat2 = palettenames2[0][2];
		    bri2 = palettenames3[0][2];
			
			shade3 = palettenames1[0][3];
		    sat3 = palettenames2[0][3];
			bri3 =  palettenames3[0][3];
			
			
		   shade4 = palettenames1[0][4];
		   sat4 = palettenames2[0][4];
		   bri4 =   palettenames3[0][4];	
		
			shade5 = palettenames1[0][5];
			sat5 = palettenames2[0][5];
			bri5 =  palettenames3[0][5];
			
			
		    shade6 = palettenames1[0][6];
		    sat6 = palettenames2[0][6];
	        bri6 =  palettenames3[0][6];
		  

           shade7 = palettenames1[0][7];
           sat7 = palettenames2[0][7];
           bri7 = palettenames3[0][7];
  		  shade8 = palettenames1[0][0];
		     sat8 = palettenames2[0][0];
		   bri8 =  palettenames3[0][0];          	
		
		  shade9 = palettenames1[0][8];
		  sat9 = palettenames2[0][8];
		  bri9 =  palettenames3[0][8];          	
var depthx = -2;
var fireplacePosition = "";
var fireplacePositionv = "";
var rememberburn1 =0;
var rememberburn2 =0;
var rememberburn3 =0;
var rememberburn4 =0;
var rememberburn5 =0;
var rememberburn6 =0;
var rememberburn7 =0;
var rememberburn8 =0;
var darkrand1= 0;
var darkrand2= 2;
var darkrand3= 4;
var darkrand4= 6;
var darkrand5= 8;
var darkrand6= 10;
var darkrand7= 12;
var darkrand8= 14;
function getRandomArbitrary(min, max) {
  return middleSquare() * (max - min) + min;
}
var cnv = document.createElement('canvas');
document.body.appendChild(cnv);
var ctx = cnv.getContext('2d');

ctx.imageSmoothingEnabled = ctx.webkitImageSmoothingEnabled = ctx.mozImageSmoothingEnabled = ctx.oImageSmoothingEnabled = false;

reqAniFrame = (function() {
	return window.requestAnimationFrame ||
		window.webkitRequestAnimationFrame ||
		window.mozRequestAnimationFrame ||
		window.oRequestAnimationFrame ||
		window.msRequestAnimationFrame
})();

var fireplaceArray = new Array(256);
var fireplaceColors = []; 
var poligon = "";

//fireplacePosition = (display.width - display.height) / 2;
var bg1 = 1;
var bg2 = 2;
var bg3 = 3;
var bg4 = 4;
var bg5 = 5;
var bg6 = 6;
var bg7 = 7;
var bg8 = 8;
var bgy1 = 3;
var bgy2 = 4;
var bgy3 = 5;
var bgy4 = 6;
var bgy5 = 7;
var bgy6 = 8;
var bgy7 = 9;
var bgy8 =10;
var bgrem1 = 0;
var bgrem2 = 0;
var bgrem3 = 0;
var bgrem4 = 0;
var bgrem5 = 0;
var bgrem6 = 0;
var bgrem7 = 0;
var bgrem8 = 0;

var lim1 = 0
var lim2= 0
var lim3= 0
var lim4 =0
var lim5 =0
var lim6=0  
var lim7 =0
var lim8 =0
var lim1x = 0
var lim2x= 0
var lim3x= 0
var lim4x=0
var lim5x=0
var lim6x=0  
var lim7x=0
var lim8x =0



 var w1 = 0;
 var w2 = 1;
 var w3 = 2;
 var w4 = 0;
 var w5 = 1
  var w6 = 2;
 var w7 = 0;
 var w8 = 1;
 var w9 = 2;
 var w10 = 0;
  var w11 = 1;
 var w12 = 2;
 var w13 = 0;
 var w14 = 1;
 var w15 = 2; 
 var w16 = 0;

var forrev = 0;
var bg1z = 1;
var bg2z = 2;
var bg3z = 3;
var bg4z = 4;
var bg5z = 5;
var bg6z = 6;
var bg7z = 7;
var bg8z = 8;
var bgy1z = 3;
var bgy2z = 4;
var bgy3z = 5;
var bgy4z = 6;
var bgy5z = 7;
var bgy6z = 8;
var bgy7z = 9;
var bgy8z =10;
var bgrem1z = 0;
var bgrem2z = 0;
var bgrem3z = 0;
var bgrem4z = 0;
var bgrem5z = 0;
var bgrem6z = 0;
var bgrem7z = 0;
var bgrem8z = 0;

var wavey = 0;
var dark1 = 1;
var dark2 = 2;
var dark3 = 3;
var dark4 = 4;
var dark5 = 6;
var dark6 = 5;
var dark7 = 6;
var dark8 = 7;
var darky1 = 3;
var darky2 = 4;
var darky3 = 5;
var darky4 = 6;
var darky5 = 7;
var darky6 = 8;
var darky7 = 9;
var darky8 =10;
var darkrem1 = 0;
var darkrem2 = 0;
var darkrem3 = 0;
var darkrem4 = 0;
var darkrem5 = 0;
var darkrem6 = 0;
var darkrem7 = 0;
var darkrem8 = 0;
var slowwood = 0;
var dark1z = 12;
var dark2z = 13;
var dark3z = 14;
var dark4z = 15;
var dark5z = 16;
var dark6z = 17;
var dark7z = 18;
var dark8z = 19;
var darky1z = 3;
var darky2z = 4;
var darky3z = 5;
var darky4z = 6;
var darky5z = 7;
var darky6z = 8;
var darky7z = 9;
var darky8z =10;
var darkrem1z = 0;
var darkrem2z = 0;
var darkrem3z = 0;
var darkrem4z = 0;
var darkrem5z = 0;
var darkrem6z = 0;
var darkrem7z = 0;
var darkrem8z = 0;
var forevermax = 0;
var forevermin = 0;
var match = 0;
var sparks1 = 1;
var sparks2 = 2;
var sparks3 = 3;
var sparks4 = 1;
var sparks5 = 2;
var sparks6 = 3;
var sparks7 = 0;
var sparks8 = 1;
var sparky1 = 0;
var sparky2 = 0;
var sparky3 = 0;
var sparky4 = 0;
var sparky5 = 0;
var sparky6 = 0;
var sparky7 = 0;
var sparky8 = 0;
var woodsy = 0;
var holdwoodsy = 0;
var holdwoodsyarr = [];
var holdwoodsyarr0 = [];
var holdwoodsyarr2 = [];
var holdwoodsyarr3 = [];
var holdwoodsyarr5 = [];

var loglight1=[];
var loglight2=[];
var loglight3=[];
var woodanimation = 0;
var jello = 0;
var smart2 = 0;
var weights = 0


            /***********************************************/
            /**************** MEAT STARTS HERE *************/
            function spreadFire(src) {
                var pixel = fireplaceArray[src];
                if(pixel == 0) {
                    fireplaceArray[src - 16] = 0;
                } if ( pixel == 20 || pixel == 21 || pixel == 22 || pixel == 23 || pixel == 24 || pixel == 25 ||
                 pixel == 26 || pixel == 27) {
				
  // if (r < 0.5) fireplaceArray[(y - 1 << 4) + x] = 8;
   //	if (r > 0.5) fireplaceArray[(y - 1 << 4) + x] = Math.round(middleSquare() * 2 + 1) + 4;
	   //  if (r > 0.5 && r < 0.999) fireplaceArray[src - 16] = 20;	
			//	fireplaceArray[(y << 4) + x] = 0;
             var randIdx = Math.round(Math.random() * 16 & 3);// & 3; 
                                 var dst = randIdx + 2;
                                 fireplaceArray[src - 16] = dst; 
                }
            }
            
            function doFire() {
                for(x=0 ; x < 16; x++) {
                    for (y = 1; y < 16; y++) {
                        spreadFire(y * 16 + x);
                    }
                }
            }
            /***********************************************/
            /*************** MEAT ENDS HERE ****************/
            /***********************************************/

function fireplaceArrayInit() {

	for (var i = 0; i < 256; i ++) {
		fireplaceArray[i] = 0;
	}
	
	
	


	
	/*
	
	for (var i = 239; i < 240; i ++) {
		fireplaceArray[i] = Math.round(Math.random() * 2) + 1 - sparks;
	} */

}
fireplaceArrayInit();
var swayx = 0;
var swayy = 0;
var retro =0;
var burst = 0;
var shine = 0;
var gotcha = 0;
var edge = 0;
var left=0;
var right = 0;
var LRM = 0;
var topz =0;
var mylayout =0;
var toggle1 = 1;
var toggle2 = 2;
var toggle3 = 3;
var smart = 0;
var TZR = 0;
var TZL = 0;
var slide =0;
var divine=0;
var divinex = 0;
var slider1 = 0;
var slider2 = 0;
var slider3 = 0;
var slider4 = 0;
var slider5 = 0;
var slider6 = 0;
var slider7 = 0;
var slider8 = 0;
var randomheartbeat = 0;

		 var rememberspot1 = 0;
		 var rememberspot2 = 0;
		 var rememberspot3 = 0;
		 var rememberspot4 = 0;
		 var rememberspot5 = 0;
		 var numberspots = 0;
		 var numberspots2 = 0;
		 var numberspots3 = 0;
		 var calarr1 = 0;
		 var calarr2 = 0;
		 var calarr3 = 0;
		 var caldyco = 0;
		 var ted = 1;
		 var tedmodulus = 0;
		 var wavvy = 0;
		 var zig =0;
		 var zag = 0;
		 var twofeettall = 0;
		 var holdwoodsyarr4 = [];
		 
		 
		 
		 

function fireplaceMove() {
fireplaceArrayInit();
  bounce = getRandomArbitrary(0, 0);
  bouncex = 0.79;
  retro = getRandomArbitrary(0.7, 0.7);
  

//MAGICKBG

  
	for (var x = (0); x < (16); x++) {
		for (var y = (0); y < (16); y++) {
	
			doFire();
		   doFire();
			wavewait++;
if (wavewait > 65)
wavewait =0;
if (wavewait > 64)
		fireDepth();
			//lighting();
			//roony();

			

// #zzzz
			
			
			
			
	var between = Math.round(getRandomArbitrary(4, 9));
 if (firebounce == 0)
 {
   jello = 0;
  slider1 = 0;
 slider2 = 0;
slider3 = 0;
slider4 = 0;
slider5 = 0;
slider6 = 0;
slider7 = 0;
 }
  if (firebounce == 1)
 {
      jello = 0;
 slider1 = 0;
 slider2 = 0;
slider3 = 0;
slider4 = 0;
slider5 = 0;
slider6 = 0;
slider7 = 0;
 }
  if (firebounce == 2)
 {
      jello = 0;
  slider1 = 0;
 slider2 = 0;
slider3 = 0;
slider4 = 0;
slider5 = 0;
slider6 = 0;
slider7 = 0;
 }
   if (firebounce == 3)
 {
      jello = 0;
 slider1 = 0;
 slider2 = 0;
slider3 = 0;
slider4 = 0;
slider5 = 0;
slider6 = 0;
slider7 = 0;
 }
 
 var top1 = 0
 var top2 = 0
 var top3 = 0
 var top4 = 0
 var top5 = 0
 var top6 = 0
 var top7 = 0
 var top8 = 0
 var top9 = 0
 var top10 = 0;

  var topmini1x1 = 7;
 var topmini1x2 = 7;
 var topmini1x3 = 7;
 var topmini1x4 = 6;
 var topmini1x5 = 6;
 var topmini1x6 = 6;
 var topmini1x7 = 6;
 var topmini1x8 = 6;
 var topmini1x9 = 6;
 var topmini1x10 = 6;
 var myrandomz = Math.floor(middleSquare() * 12);
   var topmini2x1 = 7;
 var topmini2x2 = 7;
 var topmini2x3 = 7;
 var topmini2x4 = 6;
 var topmini2x5 = 6;
 var topmini2x6 = 5;
 var topmini2x7 = 4;
 var topmini2x8 = 3;
 var topmini2x9 = 2;
 var topmini2x10 = 1;


 
 var separator1 = 0;
 var separator2 = 0;
 
 var divinemini1 =0;
 var divineminix1 =0;
 var divinemini2 = 0;
 var divineminix2 =0;
 twofeettall = Math.round(getRandomArbitrary(0,0));
 
 

//MINIESS
/*
if (smart == -1)
 {
 divinemini1 = Math.round(getRandomArbitrary(-1,0));
 }
 if (smart == 0)
 {
divinemini1 = Math.round(getRandomArbitrary(-1,1));
}
 if (smart == 1)
 {
divinemini1 = Math.round(getRandomArbitrary(0,1));
}
if (smart2 == -1)
 {
 divineminix1 = Math.round(getRandomArbitrary(-1,0));
 }
 if (smart2 == 0)
 {
divineminix1 = Math.round(getRandomArbitrary(-1,1));
}
 if (smart2 == 1)
 {
divineminix1 = Math.round(getRandomArbitrary(0,1));
}


if (smart == -1)
 {
 divinemini2 = Math.round(getRandomArbitrary(-1,0));
 }
 if (smart == 0)
 {
divinemini2 = Math.round(getRandomArbitrary(-1,1));
}
 if (smart == 1)
 {
divinemini2 = Math.round(getRandomArbitrary(0,1));
}
if (smart2 == -1)
 {
 divineminix2 = Math.round(getRandomArbitrary(-1,0));
 }
 if (smart2 == 0)
 {
divineminix2 = Math.round(getRandomArbitrary(-1,1));
}
 if (smart2 == 1)
 {
divineminix2 = Math.round(getRandomArbitrary(0,1));
}
*/
var topbot = 0;
var countbounce = 0;

var topbotmini1 = 16;
var topbotmini2 = 48;

var sheets = 0;
//BIGONE
var emblem = 0;
var robit = 0;
var depth = 0;
var depth2 = 5;
var topz = 0;
var maitai = 0
var dmin = 0

  if (twofeettall == 0)
 {

var lame = Math.floor(middleSquare() * ((2) - (0)) + (0));
//var lame = 0; 
holdflamemod++;
if (holdflamemod < 2)
flamemod=0;
if(holdflamemod > 1000)
flamemod=0;
if(holdflamemod > 2000)
holdflamemod=0;
flame1 = -1;
flame2 = -1;
/*
if (flamemod == 0)
{
flame1 = -1;
flame2 = 0;
}
if (flamemod == 1)
{
flame1 = 0;
flame2 = -1;
}*/
   
   
  for (ear = 0; ear < 16; ear++)
   {
  
  
  
   
   
    if (ear == 0)
     dmin = w1   + depthx + tr1 + 12 + flame1 ; 
    if (ear == 1)
     dmin = w2  + depthx  + tr2 + 11 + flame1   + flame1   ;  
     if (ear == 2)
     dmin = w3  + depthx  + tr3 + 8 + flame1  + flame1    ;
     if (ear == 3)
     dmin = w4  + depthx  + tr4 + 7+ flame1  + flame1   ;
     if (ear == 4)
     dmin =  w5 + depthx  + tr5 + 6 + flame1  + flame1   ;
     if (ear == 5)
     dmin =  w6 + depthx  + tr6 + 5 + flame1  + flame1   ;
     if (ear == 6)
     dmin =  w7  + depthx  + tr7 + 4  + flame1   ;
     if (ear == 7)
     dmin =  w8 + depthx  + tr8 + 3 ;


if (ear == 15 )
     dmin = w16 + depthx  + tr16 + 10 + flame2 ; 
    if (ear == 14 )
     dmin = w15  + depthx  + tr15 + 9 + flame2 + flame2 ;
     if (ear == 13 )
     dmin = w14  + depthx  + tr14 + 8+  flame2+ flame2;
     if (ear == 12 )
     dmin = w13 + depthx  + tr13 + 7 + flame2 + flame2  ;
     if (ear == 11 )
     dmin =  w12 + depthx  + tr12 + 6  + flame2  + flame2;
     if (ear == 10 )
     dmin =  w11 + depthx  + tr11 + 5 + flame2 + flame2   ;
     if (ear == 9 )
     dmin =  w10  + depthx  + tr10 + 4  + flame2;
     if (ear == 8 )
     dmin =  w9 + depthx  + tr9 + 3 ;

 if (w1 > 2)
 w1 = 0;
  if (w2 > 2)
 w2 = 0;
  if (w3 > 2)
 w3 = 0;
  if (w4 > 2)
 w4 = 0;
  if (w5 > 2)
 w5 = 0;
  if (w6 > 2)
 w6 = 0;
  if (w7 > 2)
 w7 = 0;
  if (w8 > 2)
 w8 = 0;
  if (w9 > 2)
 w9 = 0;
  if (w10 > 2)
 w10 = 0;
  if (w11 > 2)
 w11 = 0;
  if (w12 > 2)
 w12 = 0;
  if (w13 > 2)
 w13 = 0;
  if (w14 > 2)
 w14 = 0;
  if (w15 > 2)
 w15 = 0;
  if (w16 > 2)
 w16 = 0;
 
 w1++;
  w2++;
   w3++;
    w4++;
  w5++;
  w6++;
   w7++;
    w8++;
     w9++;
  w10++;
   w11++;
    w12++;
     w13++;
  w14++;
   w15++;
    w16++;
    var limit=0;
    var startfire=0;

    if (holdlogs > 3200)
    {
    	holdlogsx = holdlogsx + 16;
        holdlogs=0;
    }
    if (holdlogsx < 0)
    {
    	holdlogs++;
    }
    if (holdlogsx == 0)
    startfire=1;
    
    if (burnin < 120000)
     burnin++;
     if (burnin == 120000)
     {
     forevermax = 14;
     limit = 14;
     }
     bouncy++;
     if (bouncy > 8192)
     {
     if (updown == 0)
     forevermax++;
      if (updown == 1)
     --forevermax;
     }
     if (forevermax > limit)
     {
     updown=1;
     }
     if (forevermax < limit)
     {
     updown=0;
     }
     if (bouncy > 8192)
     bouncy=0;
     
     myrandomz =  ((forevermax - dmin - lame));
 



var defaultLR1 = 240 + 32;
var defaultLR2 = 255 + 32;
   var equation1 = (defaultLR1 + (ear) + divine + divinex);
   var myrandomzh = myrandomz;
   // var equation1 = (240 + robit - topbot + topz + divine + divinex);
  //  var equation2 = (256 + robit - topbot - topz + divine + divinex);
		for (var i = 0; i < (myrandomz); i++)
		{
	  

		
if ((i * 16) < ((myrandomz * 16))) 
	  between = Math.round(getRandomArbitrary(26,27))
					
if ((i * 16) == ((myrandomz * 16)-128)) 
	  between = Math.round(getRandomArbitrary(26,27))	
if ((i * 16) == ((myrandomz * 16)-112)) 
	  between = Math.round(getRandomArbitrary(26,27))	
if ((i * 16) == ((myrandomz * 16)-96)) 
	  between = Math.round(getRandomArbitrary(25,27))
if ((i * 16) == ((myrandomz * 16)-80)) 
	  between = Math.round(getRandomArbitrary(24,26))
if ((i * 16) == ((myrandomz * 16)-64)) 
	  between = Math.round(getRandomArbitrary(23,25))
if ((i * 16) == ((myrandomz * 16)-48)) 
	  between = Math.round(getRandomArbitrary(22,24))
if ((i * 16) == ((myrandomz * 16)-32)) 
	  between = Math.round(getRandomArbitrary(21,24))
if ((i * 16) == ((myrandomz * 16)-16)) 
	  between = Math.round(getRandomArbitrary(20,23))
if ((i * 16) == ((myrandomz * 16))) 
	  between = Math.round(getRandomArbitrary(20,23))
        
		fireplaceArray[(defaultLR1 + ear) + (i * -16)] = between;
		sheets = between;
	   
	
		/*
	if   (equation1 == defaultLR1 || equation1 == defaultLR2)
		{
		
//if ((i * 16) > ((myrandomz * 16)-96)) 
	//  between = Math.round(getRandomArbitrary(1,6))					
if ((i * 16) == ((myrandomz * 16)-142)) 
	  between = Math.round(getRandomArbitrary(1,6))

if ((i * 16) == ((myrandomz * 16)-128)) 
	  between = Math.round(getRandomArbitrary(1,6))

if ((i * 16) == ((myrandomz * 16)-112)) 
	  between = Math.round(getRandomArbitrary(1,6))


	
if ((i * 16) == ((myrandomz * 16)-96)) 
	  between = Math.round(getRandomArbitrary(1,6))
if ((i * 16) == ((myrandomz * 16)-80)) 
	  between = Math.round(getRandomArbitrary(1, 6))
if ((i * 16) == ((myrandomz * 16)-64)) 
	  between = Math.round(getRandomArbitrary(1,6))
if ((i * 16) == ((myrandomz * 16)-48)) 
	  between = Math.round(getRandomArbitrary(1,6))
if ((i * 16) == ((myrandomz * 16)-32)) 
	  between = Math.round(getRandomArbitrary(1,6))
if ((i * 16) == ((myrandomz * 16) -16)) 
	  between = Math.round(getRandomArbitrary(1,5))
if ((i * 16) == ((myrandomz * 16))) 
	  between = Math.round(getRandomArbitrary(1,5))

	
		fireplaceArray[(defaultLR1 + ear) + (i * -16)] = between;
		
		  
		}			
		*/
		/*
	
	if   (equation1 == (defaultLR1 + 1) || equation1 == (defaultLR2 - 1))
		{
//	if ((i * 16) > ((myrandomz * 16)-96)) 
	 // between = Math.round(getRandomArbitrary(24,25))					
if ((i * 16) == ((myrandomz * 16)-180)) 
	  between = Math.round(getRandomArbitrary(24,25))

if ((i * 16) == ((myrandomz * 16)-174)) 
	  between = Math.round(getRandomArbitrary(24,25))

if ((i * 16) == ((myrandomz * 16)-158)) 
	  between = Math.round(getRandomArbitrary(24,25))


if ((i * 16) == ((myrandomz * 16)-142)) 
	  between = Math.round(getRandomArbitrary(24,25))

if ((i * 16) == ((myrandomz * 16)-128)) 
	  between = Math.round(getRandomArbitrary(24,25))

if ((i * 16) == ((myrandomz * 16)-112)) 
	  between = Math.round(getRandomArbitrary(24,25))

	
if ((i * 16) == ((myrandomz * 16)-96)) 
	  between = Math.round(getRandomArbitrary(24,25))
if ((i * 16) == ((myrandomz * 16)-80)) 
	  between = Math.round(getRandomArbitrary(23,24))
if ((i * 16) == ((myrandomz * 16)-64)) 
	  between = Math.round(getRandomArbitrary(22,23))
if ((i * 16) == ((myrandomz * 16)-48)) 
	  between = Math.round(getRandomArbitrary(21,22))
if ((i * 16) == ((myrandomz * 16)-32)) 
	  between = Math.round(getRandomArbitrary(20,21))
if ((i * 16) == ((myrandomz * 16) -16)) 
	  between = Math.round(getRandomArbitrary(1,5))
if ((i * 16) == ((myrandomz * 16))) 
	  between = Math.round(getRandomArbitrary(1,5))

	
		fireplaceArray[(defaultLR1 + ear) + (i * -16)] = between;
		
	
		}	*/
	

	
	
		
    }
    depth =0;
    robit =0;
   }
 }
   

 
 
 

	//woodsyorig

   /*
   	for (var i = 240; i < 245; i ++) {
  
   	between = Math.round(getRandomArbitrary(0, 5));
		holdwoodsy = between;
		holdwoodsyarr[calarr1] = holdwoodsy;
		fireplaceArray[i] = holdwoodsyarr[calarr1];
   	}
   	for (var i = 224; i < 249; i ++) {
  
   	between = Math.round(getRandomArbitrary(0, 5));
		holdwoodsy = between;
		holdwoodsyarr[calarr1] = holdwoodsy;
		fireplaceArray[i] = holdwoodsyarr[calarr1];
   	}
   	for (var i = 208; i < 213; i ++) {
  
   	between = Math.round(getRandomArbitrary(0, 5));
		holdwoodsy = between;
		holdwoodsyarr[calarr1] = holdwoodsy;
		fireplaceArray[i] = holdwoodsyarr[calarr1];
   	}*/
 
  
 
 
	//woodsyorig
	if (firebounce > 3)
	firebounce = 0;


		}
		
		
		



	}
	  firebounce++;
woodsy++;
if (woodsy == 5)
woodsy = 1;
	burst = 0;


//	if (tedmodulus > 3)
//	tedmodulus = 0;

//	if (tedmodulus < 2)
	//ted = 7;
	//tedmodulus++;
//	LRM++;
	if (LRM%2 == 0)
	{
	topz = 5;
  left = 0;
  right = 0;
	}
	if (LRM%2 != 0)
	{
	topz= 0;
	left = 0;
	right = 0;
	}
	
	//burst
	
	
	between = Math.round(getRandomArbitrary(1, 3));

   
//////HOLD
	


if (woodanimation == 3)
woodanimation = 0;
toggle1++;
toggle2++;
toggle3++;
caldyco++;
randomheartbeat = 3;
if (toggle1 > randomheartbeat)
toggle1 = 1;
if (toggle2 > randomheartbeat)
toggle2 = 1;
if (toggle2 > randomheartbeat)
toggle2 = 1;
if (caldyco > 2)
caldyco = 3;

//fireplaceArray[238] = between;
//if (startfire == 1) {


function sparkbggenerator(mybully, spark, burn, lim) {
var spark1 = spark;

var betweenx = Math.round(getRandomArbitrary(19, 19));
if (lim < 4)
if (mybully < 16)
{
if (mybully == 1)
{
//burn = spark;
spark1 = spark1;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 2)
{
//burn = spark;
spark1 = spark1 - 16;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 3)
{
//burn = spark;
spark1 = spark1 - 32;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 4)
{
//burn = spark;
spark1 = spark1 - 48;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 5)
{
//burn = spark;
spark1 = spark1 - 64;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 6)
{
//burn = spark;
spark1 = spark1 - 70;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 7)
{
//burn = spark;
spark1 = spark1 - 96;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 8)
{
//burn = spark;
spark1 = spark1 - 112;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 9)
{
//burn = spark;
spark1 = spark1 - 128;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 10)
{
//burn = spark;
spark1 = spark1 - 144;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 11)
{
//burn = spark;
spark1 = spark1 - 160;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 12)
{
//burn = spark;
spark1 = spark1 - 176;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 13)
{
//burn = spark;
spark1 = spark1 - 192;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}
if (mybully == 14)
{
//burn = spark;
spark1 = spark1 - 208;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}

if (mybully == 15)
{
//burn = spark;
spark1 = spark1 - 224;
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}

if (mybully == 16)
{
//burn = spark;
spark1 = spark1 - 240; 
//fireplaceArray[burn] = 1;
if (fireplaceArray[spark1] == fireplaceArray[sheets])
{
lim++;
if (lim > 1)
fireplaceArray[spark1] = 19;
}
}

}
currlim = lim; 
}



if (caldyco == 3)
{

function sparkdarkgenerator(mybully, spark, burn) {
var spark1 = spark;
var betweenx = Math.round(getRandomArbitrary(6, 8));
if (mybully < 16)
{
if (mybully == 3)
{
//burn = spark;
spark1 = spark1 - 32;
//fireplaceArray[burn] = 1;
fireplaceArray[spark1] = 4;
}
if (mybully == 4)
{
//burn = spark;
spark1 = spark1 - 48;
//fireplaceArray[burn] = 1;
fireplaceArray[spark1] = 4;
}
if (mybully == 5)
{
//burn = spark;
spark1 = spark1 - 64;
//fireplaceArray[burn] = 1;
fireplaceArray[spark1] = 4;
}
if (mybully == 6)
{
//burn = spark;
spark1 = spark1 - 80;
//fireplaceArray[burn] = 1;
fireplaceArray[spark1] = 4;
}
if (mybully == 7)
{
//burn = spark;
spark1 = spark1 - 96;
//fireplaceArray[burn] = 1;
fireplaceArray[spark1] = 4;
}
if (mybully == 8)
{
//burn = spark;
spark1 = spark1 - 112;
//fireplaceArray[burn] = 1;
fireplaceArray[spark1] = 4;
}
if (mybully == 9)
{
//burn = spark;
spark1 = spark1 - 128;
//fireplaceArray[burn] = 1;
fireplaceArray[spark1] = 4;
}
if (mybully == 10)
{
//burn = spark;
spark1 = spark1 - 144;
//fireplaceArray[burn] = 1;
fireplaceArray[spark1] = 4;
}
if (mybully == 11)
{
//burn = spark;
spark1 = spark1 - 160;
//fireplaceArray[burn] = 1;
fireplaceArray[spark1] = 4;
}
}
}

  
function sparkgenerator(mybully, spark, burn) {
var spark1 = spark;
var betweenx = Math.round(getRandomArbitrary(24,25));
if (mybully < 5)
{
if (mybully == 0)
{

fireplaceArray[spark1] = betweenx;

}

if (mybully == 1)
{
//burn = spark;
spark1 = spark1 - 16;
//fireplaceArray[burn] = 1;
fireplaceArray[spark1] = betweenx;
}

if (mybully == 2)
{
spark1 = spark1 - 32;
//burn = spark - 16;
fireplaceArray[spark1] = betweenx;
}
if (mybully == 3)
{
spark1 = spark1 - 48;
//burn = spark - 16;
fireplaceArray[spark1] = betweenx;
}



}
}
if (startfire == 1) {
// #zzz

if (bg1z == 1)
{
var bgrandz = Math.round(getRandomArbitrary(240, 256));
bgrem1z = bgrandz;
bgy1z = bgrandz;
}
sparkbggenerator(bg1z, bgy1z, bgrem1z, lim1);
bg1z++;
lim1 = currlim;
currlim = 0;
if (bg1z > 16)
{
  bg1z = 1
  lim1 = 0;
}


if (bg2z == 1)
{
var bgrand2z = Math.round(getRandomArbitrary(240, 256));
bgrem2z = bgrand2z;
bgy2z = bgrand2z;
}
sparkbggenerator(bg2z, bgy2z, bgrem2z, lim2);
bg2z++;
lim2 = currlim;
currlim = 0;
if (bg2z > 16)
{
 bg2z = 1 ;
   lim2 = 0;
}


if (bg3z == 1)
{
var bgrand3z = Math.round(getRandomArbitrary(240, 256));
bgrem3z = bgrand3z;
bgy3z = bgrand3z;
}
sparkbggenerator(bg3z, bgy3z, bgrem3z,lim3);
bg3z++;
lim3 = currlim;
currlim = 0;
if (bg3z > 16)
{
  bg3z = 1;
    lim3 = 0;
}


if (bg4z == 1)
{
var bgrand4z = Math.round(getRandomArbitrary(240, 256));
bgrem4z = bgrand4z;
bgy4z = bgrand4z;
}
sparkbggenerator(bg4z, bgy4z, bgrem4z,lim4);
bg4z++;
lim4 = currlim;
currlim = 0;
if (bg4z > 16)
{
  bg4z = 1;
    lim4 = 0;
}


if (bg5z == 1)
{
var bgrand5z = Math.round(getRandomArbitrary(240, 256));
bgrem5z = bgrand5z;
bgy5z = bgrand5z;
}
sparkbggenerator(bg5z, bgy5z, bgrem5z, lim5);
bg5z++;
lim5 = currlim;
currlim = 0;
if (bg5z > 16)
{
  bg5z = 1;
    lim5 = 0;
}


if (bg6z == 1)
{
var bgrand6z = Math.round(getRandomArbitrary(240, 256));
bgrem6z = bgrand6z;
bgy6z = bgrand6z;
}
sparkbggenerator(bg6z, bgy6z, bgrem6z, lim6);
bg6z++;
lim6 = currlim;
currlim = 0;
if (bg6z > 16)
{
  bg6z = 1;
    lim6 = 0;
}


if (bg7z == 1)
{
var bgrand7z = Math.round(getRandomArbitrary(240, 256));
bgrem7z = bgrand7z;
bgy7z = bgrand7z;
}
sparkbggenerator(bg7z, bgy7z, bgrem7z, lim7);
bg7z++;
lim7 = currlim;
currlim = 0;
if (bg7z > 16)
{
  bg7z = 1;
    lim7 = 0;
}

if (bg8z == 1)
{
var bgrand8z = Math.round(getRandomArbitrary(240, 256));
bgrem8z = bgrand8z;
bgy8z = bgrand8z;
}
sparkbggenerator(bg8z, bgy8z, bgrem8z, lim8);
bg8z++;
lim8 = currlim;
currlim = 0;
if (bg8z > 16)
{
  bg8z = 1;
    lim8 = 0;
}  
//MAGICKBG


if (bg1 == 4)
{
var bgrand = Math.round(getRandomArbitrary(240, 256));
bgrem1 = bgrand;
bgy1 = bgrand;
}
sparkbggenerator(bg1, bgy1, bgrem1, lim1x);
bg1++;
lim1x = currlim;
currlim = 0;
if (bg1 > 16)
{
  bg1 = 4
  lim1x = 0;
}


if (bg2 == 4)
{
var bgrand2 = Math.round(getRandomArbitrary(240, 256));
bgrem2 = bgrand2;
bgy2 = bgrand2;
}
sparkbggenerator(bg2, bgy2, bgrem2, lim2x);
bg2++;
lim2x = currlim;
currlim = 0;
if (bg2 > 16)
{
 bg2 = 4 ;
   lim2x = 0;
}


if (bg3 == 4)
{
var bgrand3 = Math.round(getRandomArbitrary(240, 256));
bgrem3 = bgrand3;
bgy3 = bgrand3;
}
sparkbggenerator(bg3, bgy3, bgrem3, lim3x);
bg3++;
lim3x = currlim;
currlim = 0;
if (bg3 > 16)
{
  bg3 = 4;
    lim3x = 0;
}


if (bg4 == 4)
{
var bgrand4 = Math.round(getRandomArbitrary(240, 256));
bgrem4 = bgrand4;
bgy4 = bgrand4;
}
sparkbggenerator(bg4, bgy4, bgrem4, lim4x);
bg4++;
lim4x = currlim;
currlim = 0;
if (bg4 > 16)
{
  bg4 = 4;
    lim4x = 0;
}


if (bg5 == 4)
{
var bgrand5 = Math.round(getRandomArbitrary(240, 256));
bgrem5 = bgrand5;
bgy5 = bgrand5;
}
sparkbggenerator(bg5, bgy5, bgrem5, lim5x);
bg5++;
lim5x = currlim;
currlim = 0;
if (bg5 > 16)
{
  bg5 = 4;
   lim5x = 0;
}


if (bg6 == 4)
{
var bgrand6 = Math.round(getRandomArbitrary(240, 256));
bgrem6 = bgrand6;
bgy6 = bgrand6;
}
sparkbggenerator(bg6, bgy6, bgrem6, lim6x);
bg6++;
lim6x = currlim;
currlim = 0;
if (bg6 > 16)
{
  bg6 = 4;
    lim6x = 0;
}


if (bg7 == 4)
{
var bgrand7 = Math.round(getRandomArbitrary(240, 256));
bgrem7 = bgrand7;
bgy7 = bgrand7;
}
sparkbggenerator(bg7, bgy7, bgrem7, lim7x);
bg7++;
lim7x = currlim;
currlim = 0;
if (bg7 > 16)
{
  bg7 = 4;
    lim7x = 0;
}

if (bg8 == 4)
{
var bgrand8 = Math.round(getRandomArbitrary(240, 256));
bgrem8 = bgrand8;
bgy8 = bgrand8;
}
sparkbggenerator(bg8, bgy8, bgrem8, lim8x);
bg8++;
lim8x = currlim;
currlim = 0;
if (bg8 > 16)
{
  bg8 = 4;
    lim8x = 0;
}  
  // #zzz

//MAGICK


if (dark1 == 3)
{
darkrand1 = Math.round(getRandomArbitrary(241, 254));

for (g = 1; g < 9; g++)
{
var morph = "darkrand" + g.toString();
if
(darkrand1 == (morph + 1) || darkrand1 == (morph - 1) ||
  darkrand1 == (morph + 16) || darkrand1 == (morph - 16) || darkrand1 == ((morph + 16)+1) || darkrand1 == ((morph + 16)-1) || darkrand1 == ((morph - 16)+1) || darkrand1 == ((morph - 16)-1) ||
  darkrand1 == (morph + 2) || darkrand1 == (morph - 2) ||
  darkrand1 == (morph + 32) || darkrand1 == (morph - 32) || darkrand1 == ((morph + 16)+2) || darkrand1 == ((morph + 16)-2) || darkrand1 == ((morph - 16)+2) || darkrand1 == ((morph - 16)-2))

darkrand1 = Math.round(getRandomArbitrary(241, 254));
}


darkrem1 = darkrand1;
darky1 = darkrand1;
}
sparkdarkgenerator(dark1, darky1, darkrem1);
dark1++;
if (dark1 > 14)
{
  dark1 = 3
}


if (dark2 == 3)
{
darkrand2 = Math.round(getRandomArbitrary(241, 254));

for (g = 1; g < 9; g++)
{
var morph = "darkrand" + g.toString();
if
(darkrand2 == (morph + 1) || darkrand2 == (morph - 1) ||
  darkrand2 == (morph + 16) || darkrand2 == (morph - 16) || darkrand2 == ((morph + 16)+1) || darkrand2 == ((morph + 16)-1) || darkrand2 == ((morph - 16)+1) || darkrand2 == ((morph - 16)-1) ||
  darkrand2 == (morph + 2) || darkrand2 == (morph - 2) ||
  darkrand2 == (morph + 32) || darkrand2 == (morph - 32) || darkrand2 == ((morph + 16)+2) || darkrand2 == ((morph + 16)-2) || darkrand2 == ((morph - 16)+2) || darkrand2 == ((morph - 16)-2))

darkrand2 = Math.round(getRandomArbitrary(241, 254));
}

darkrem2 = darkrand2;
darky2 = darkrand2;
}
sparkdarkgenerator(dark2, darky2, darkrem2);
dark2++;
if (dark2 > 14)
{
  dark2 = 3;
}


if (dark3 == 3)
{
darkrand3 = Math.round(getRandomArbitrary(241, 254));
for (g = 1; g < 9; g++)
{
var morph = "darkrand" + g.toString();
if
(darkrand3 == (morph + 1) || darkrand3 == (morph - 1) ||
  darkrand3 == (morph + 16) || darkrand3 == (morph - 16) || darkrand3 == ((morph + 16)+1) || darkrand3 == ((morph + 16)-1) || darkrand3 == ((morph - 16)+1) || darkrand3 == ((morph - 16)-1) ||
  darkrand3 == (morph + 2) || darkrand3 == (morph - 2) ||
  darkrand3 == (morph + 32) || darkrand3 == (morph - 32) || darkrand3 == ((morph + 16)+2) || darkrand3 == ((morph + 16)-2) || darkrand3 == ((morph - 16)+2) || darkrand3 == ((morph - 16)-2))

darkrand3 = Math.round(getRandomArbitrary(241, 254));
}


darkrem3 = darkrand3;
darky3 = darkrand3;
}
sparkdarkgenerator(dark3, darky3, darkrem3);
dark3++;
if (dark3 > 14)
{
  dark3 = 3;
}


if (dark4 == 3)
{
darkrand4 = Math.round(getRandomArbitrary(241, 254));

for (g = 1; g < 9; g++)
{
var morph = "darkrand" + g.toString();
if
(darkrand4 == (morph + 1) || darkrand4 == (morph - 1) ||
  darkrand4 == (morph + 16) || darkrand4 == (morph - 16) || darkrand4 == ((morph + 16)+1) || darkrand4 == ((morph + 16)-1) || darkrand4 == ((morph - 16)+1) || darkrand4 == ((morph - 16)-1) ||
  darkrand4 == (morph + 2) || darkrand4 == (morph - 2) ||
  darkrand4 == (morph + 32) || darkrand4 == (morph - 32) || darkrand4 == ((morph + 16)+2) || darkrand4 == ((morph + 16)-2) || darkrand4 == ((morph - 16)+2) || darkrand4 == ((morph - 16)-2))

darkrand4 = Math.round(getRandomArbitrary(241, 254));
}


darkrem4 = darkrand4;
darky4 = darkrand4;
}
sparkdarkgenerator(dark4, darky4, darkrem4);
dark4++;
if (dark4 > 14)
{
  dark4 = 3;
}


if (dark5 == 3)
{
darkrand5 = Math.round(getRandomArbitrary(241, 254));
for (g = 1; g < 9; g++)
{
var morph = "darkrand" + g.toString();
if
(darkrand5 == (morph + 1) || darkrand5 == (morph - 1) ||
  darkrand5 == (morph + 16) || darkrand5 == (morph - 16) || darkrand5 == ((morph + 16)+1) || darkrand5 == ((morph + 16)-1) || darkrand5 == ((morph - 16)+1) || darkrand5 == ((morph - 16)-1) ||
  darkrand5 == (morph + 2) || darkrand5 == (morph - 2) ||
  darkrand5 == (morph + 32) || darkrand5 == (morph - 32) || darkrand5 == ((morph + 16)+2) || darkrand5 == ((morph + 16)-2) || darkrand5 == ((morph - 16)+2) || darkrand5 == ((morph - 16)-2))

darkrand5 = Math.round(getRandomArbitrary(241, 254));
}

darkrem5 = darkrand5;
darky5 = darkrand5;
}
sparkdarkgenerator(dark5, darky5, darkrem5);
dark5++;
if (dark5 > 14)
{
  dark5 = 3;
}


if (dark6 == 3)
{
darkrand6 = Math.round(getRandomArbitrary(241, 254));

for (g = 1; g < 9; g++)
{
var morph = "darkrand" + g.toString();
if
(darkrand6 == (morph + 1) || darkrand6 == (morph - 1) ||
  darkrand6 == (morph + 16) || darkrand6 == (morph - 16) || darkrand6 == ((morph + 16)+1) || darkrand6 == ((morph + 16)-1) || darkrand6 == ((morph - 16)+1) || darkrand6 == ((morph - 16)-1) ||
  darkrand6 == (morph + 2) || darkrand6 == (morph - 2) ||
  darkrand6 == (morph + 32) || darkrand6 == (morph - 32) || darkrand6 == ((morph + 16)+2) || darkrand6 == ((morph + 16)-2) || darkrand6 == ((morph - 16)+2) || darkrand6 == ((morph - 16)-2))

darkrand6 = Math.round(getRandomArbitrary(241, 254));
}

darkrem6 = darkrand6;
darky6 = darkrand6;
}
sparkdarkgenerator(dark6, darky6, darkrem6);
dark6++;
if (dark6 > 14)
{
  dark6 = 3;
}


if (dark7 == 3)
{
darkrand7 = Math.round(getRandomArbitrary(241, 254));

for (g = 1; g < 9; g++)
{
var morph = "darkrand" + g.toString();
if
(darkrand7 == (morph + 1) || darkrand7 == (morph - 1) ||
  darkrand7 == (morph + 16) || darkrand7 == (morph - 16) || darkrand7 == ((morph + 16)+1) || darkrand7 == ((morph + 16)-1) || darkrand7 == ((morph - 16)+1) || darkrand7 == ((morph - 16)-1) ||
  darkrand7 == (morph + 2) || darkrand7 == (morph - 2) ||
  darkrand7 == (morph + 32) || darkrand7 == (morph - 32) || darkrand7 == ((morph + 16)+2) || darkrand7 == ((morph + 16)-2) || darkrand7 == ((morph - 16)+2) || darkrand7 == ((morph - 16)-2))

darkrand7 = Math.round(getRandomArbitrary(241, 254));
}

darkrem7 = darkrand7;
darky7 = darkrand7;
}
sparkdarkgenerator(dark7, darky7, darkrem7);
dark7++;
if (dark7 > 14)
{
  dark7 = 3;
}

if (dark8 == 3)
{
  darkrand8 = Math.round(getRandomArbitrary(241, 254));

for (g = 1; g < 9; g++)
{
var morph = "darkrand" + g.toString();
if
(darkrand8 == (morph + 1) || darkrand8 == (morph - 1) ||
  darkrand8 == (morph + 16) || darkrand8 == (morph - 16) || darkrand8 == ((morph + 16)+1) || darkrand8 == ((morph + 16)-1) || darkrand8 == ((morph - 16)+1) || darkrand8 == ((morph - 16)-1) ||
  darkrand8 == (morph + 2) || darkrand8 == (morph - 2) ||
  darkrand8 == (morph + 32) || darkrand8 == (morph - 32) || darkrand8 == ((morph + 16)+2) || darkrand8 == ((morph + 16)-2) || darkrand8 == ((morph - 16)+2) || darkrand8  == ((morph - 16)-2))

darkrand8 = Math.round(getRandomArbitrary(241, 254));
}
darkrem8 = darkrand8;
darky8 = darkrand8;
}
sparkdarkgenerator(dark8, darky8, darkrem8);
dark8++;
if (dark8 > 14)
{
  dark8 = 3;
}
}
// endoflog
// darkZZZ
/*
if (dark1z == 3)
{
var darkrandz = Math.round(getRandomArbitrary(241, 254));
darkrem1z = darkrandz;
darky1z = darkrandz;
}
sparkdarkgenerator(dark1z, darky1z, darkrem1z);
dark1z++;
if (dark1z > 26)
{
  dark1z = 3
}


if (dark2z == 3)
{
var darkrand2z = Math.round(getRandomArbitrary(241, 254));
darkrem2z = darkrand2z;
darky2z = darkrand2z;
}
sparkdarkgenerator(dark2z, darky2z, darkrem2z);
dark2z++;
if (dark2z > 26)
{
  dark2z = 3;
}


if (dark3z == 3)
{
var darkrand3z = Math.round(getRandomArbitrary(241, 254));
darkrem3z = darkrand3z;
darky3z = darkrand3z;
}
sparkdarkgenerator(dark3z, darky3z, darkrem3z);
dark3z++;
if (dark3z > 26)
{
  dark3z = 3;
}


if (dark4z == 3)
{
var darkrand4z = Math.round(getRandomArbitrary(241, 254));
darkrem4z = darkrand4z;
darky4z = darkrand4z;
}
sparkdarkgenerator(dark4z, darky4z, darkrem4z);
dark4z++;
if (dark4z > 26)
{
  dark4z = 3;
}


if (dark5z == 3)
{
var darkrand5z = Math.round(getRandomArbitrary(241, 254));
darkrem5z = darkrand5z;
darky5z = darkrand5z;
}
sparkdarkgenerator(dark5z, darky5z, darkrem5z);
dark5z++;
if (dark5z > 26)
{
  dark5z = 3;
}


if (dark6z == 3)
{
var darkrand6z = Math.round(getRandomArbitrary(241, 254));
darkrem6z = darkrand6z;
darky6z = darkrand6z;
}
sparkdarkgenerator(dark6z, darky6z, darkrem6z);
dark6z++;
if (dark6z > 26)
{
  dark6z = 3;
}


if (dark7z == 3)
{
var darkrand7z = Math.round(getRandomArbitrary(241, 254));
darkrem7z = darkrand7z;
darky7z = darkrand7z;
}
sparkdarkgenerator(dark7z, darky7z, darkrem7z);
dark7z++;
if (dark7z > 26)
{
  dark7z = 3;
}

if (dark8z == 3)
{
var darkrand8z = Math.round(getRandomArbitrary(241, 254));
darkrem8z = darkrand8z;
darky8z = darkrand8z;
}
sparkdarkgenerator(dark8z, darky8z, darkrem8z);
dark8z++;
if (dark8z > 26)
{
  dark8z = 3;
}*/
//HOLD WOOD HOLY PIT

if (slowwood == 0)
{
	
  		for (var i = (256 + holdlogsx); i < (272 + holdlogsx); i ++) {
		
		
	between = Math.round(getRandomArbitrary(11, 18));
		
		
		holdwoodsy = between;
		holdwoodsyarr0[calarr1] = holdwoodsy;
		
		
		fireplaceArray[i] = holdwoodsyarr0[calarr1];
	
		calarr1++;
	} 
	calarr1 = 0;	
	
  		for (var i = (240 + holdlogsx); i < (256 + holdlogsx); i ++) {
		
		
	between = Math.round(getRandomArbitrary(11, 18));
		
		
		holdwoodsy = between;
		holdwoodsyarr[calarr1] = holdwoodsy;
		
		
		fireplaceArray[i] = holdwoodsyarr[calarr1];
	
		calarr1++;
	} 
	calarr1 = 0;
  for (var i = (226 + holdlogsx); i < (237 + holdlogsx); i ++) {
		
		
	between = Math.round(getRandomArbitrary(11, 18));
		
		
		holdwoodsy = between;
		holdwoodsyarr2[calarr1] = holdwoodsy;
		
		
		fireplaceArray[i] = holdwoodsyarr2[calarr1];
	
		calarr1++;
	} 
	calarr1 = 0;
	for (var i = (212 + holdlogsx); i < (222 + holdlogsx); i ++) {
		
		
	between = Math.round(getRandomArbitrary(11, 18));
		
		
		holdwoodsy = between;
		holdwoodsyarr3[calarr1] = holdwoodsy;
		
		
		fireplaceArray[i] = holdwoodsyarr3[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;
		
	for (var i = (200 + holdlogsx); i < (206 + holdlogsx); i ++) {
		
		
	between = Math.round(getRandomArbitrary(11, 18));
		
		
		holdwoodsy = between;
		holdwoodsyarr4[calarr1] = holdwoodsy;
		
		
		fireplaceArray[i] = holdwoodsyarr4[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;		

	for (var i = (185 + holdlogsx); i < (188 + holdlogsx); i ++) {
		
		
	between = Math.round(getRandomArbitrary(11, 18));
		
		
		holdwoodsy = between;
		holdwoodsyarr5[calarr1] = holdwoodsy;
		
		
		fireplaceArray[i] = holdwoodsyarr5[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;			
		
		
  		for (var i = (240 + holdlogsx); i < (254 + holdlogsx); i ++) {
		
		
	between = Math.round(getRandomArbitrary(28, 36));
		
		
		holdwoodsy = between;
		loglight1[calarr1] = holdwoodsy;
		
		
		fireplaceArray[i] = loglight1[calarr1];
	
		calarr1++;
	} 
	calarr1 = 0;	
		
	for (var i = (228 + holdlogsx); i < (237 + holdlogsx); i ++) {
		
		
	between = Math.round(getRandomArbitrary(28, 36));
		
		
		holdwoodsy = between;
		loglight2[calarr1] = holdwoodsy;
		
		
		fireplaceArray[i] = loglight2[calarr1];
	
		calarr1++;
	} 
	calarr1 = 0;	
	for (var i = (217 + holdlogsx); i < (220 + holdlogsx); i ++) {
		
		
	between = Math.round(getRandomArbitrary(28, 36));
		
		
		holdwoodsy = between;
		loglight3[calarr1] = holdwoodsy;
		
		
		fireplaceArray[i] = loglight3[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;	
		
		
		
		
		
		
		
		
}
if (slowwood < 15)
{
	  		for (var i = (256 + holdlogsx); i < (272 + holdlogsx); i ++) {


		
		fireplaceArray[i] = holdwoodsyarr0[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;
  		for (var i = (240 + holdlogsx); i < (256 + holdlogsx); i ++) {


		
		fireplaceArray[i] = holdwoodsyarr[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;
  for (var i = (226 + holdlogsx); i < (237 + holdlogsx); i ++) {
		

		
		fireplaceArray[i] = holdwoodsyarr2[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;
	for (var i = (212 + holdlogsx); i < (222 + holdlogsx); i ++) {
		

		
		fireplaceArray[i] = holdwoodsyarr3[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;
		
for (var i = (200 + holdlogsx); i < (206 + holdlogsx); i ++) {
		
		
	
		fireplaceArray[i] = holdwoodsyarr4[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;		

for (var i = (185 + holdlogsx); i < (188 + holdlogsx); i ++) {
		
		
	
		fireplaceArray[i] = holdwoodsyarr5[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;				
		
		

  		for (var i = (240 + holdlogsx); i < (254 + holdlogsx); i ++) {


		
		fireplaceArray[i] = loglight1[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;	
for (var i = (228 + holdlogsx); i < (237 + holdlogsx); i ++) {
		

		
		fireplaceArray[i] = loglight2[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;		
		
for (var i = (217 + holdlogsx); i < (220 + holdlogsx); i ++) {
		

		
		fireplaceArray[i] = loglight3[calarr1];
	
		calarr1++;
	} 
		calarr1 = 0;		
		
}




reallyslowwood++;

if (reallyslowwood < 5)
{
slowwood = 1;
}
if (reallyslowwood == 5)
{
slowwood=0;
reallyslowwood=0;
}

if (startfire == 1) {
// SPARKz
if (sparks1 == 0)
{
var sparks1rand = Math.round(getRandomArbitrary(240, 256));
rememberburn1 = sparks1rand;
sparky1 = sparks1rand;
}
sparkgenerator(sparks1, sparky1, rememberburn1);
sparks1++;
if (sparks1 > 4)
{
  sparks1 = 0;
}

if (sparks2 == 0)
{
var sparks2rand = Math.round(getRandomArbitrary(240, 256));
rememberburn2 = sparks2rand;
sparky2 = sparks2rand;
}
sparkgenerator(sparks2, sparky2, rememberburn2);
sparks2++;
if (sparks2 > 4)
{
  sparks2 = 0;
}


if (sparks3 == 0)
{
var sparks3rand = Math.round(getRandomArbitrary(240, 256));
rememberburn3 = sparks3rand;
sparky3 = sparks3rand;
}
sparkgenerator(sparks3, sparky3, rememberburn3);
sparks3++;
if (sparks3 > 4)
{
  sparks3 = 0;
}
if (sparks4 == 0)
{
var sparks4rand = Math.round(getRandomArbitrary(240, 256));
rememberburn4 = sparks4rand;
sparky4 = sparks4rand;
}
sparkgenerator(sparks4, sparky4, rememberburn4);
sparks4++;
if (sparks4 > 4)
{
  sparks4 = 0;
}

if (sparks5 == 0)
{
var sparks5rand = Math.round(getRandomArbitrary(240, 256));
rememberburn5 = sparks5rand;
sparky5 = sparks5rand;
}
sparkgenerator(sparks5, sparky5, rememberburn5);
sparks5++;
if (sparks5 > 4)
{
  sparks5 = 0;
}

if (sparks6 == 0)
{
var sparks6rand = Math.round(getRandomArbitrary(240, 256));
rememberburn6 = sparks6rand;
sparky6 = sparks6rand;
}
sparkgenerator(sparks6, sparky6, rememberburn6);
sparks6++;
if (sparks6 > 4)
{
  sparks6 = 0;
}
if (sparks7 == 0)
{
var sparks7rand = Math.round(getRandomArbitrary(240, 256));
rememberburn7 = sparks7rand;
sparky7 = sparks7rand;
}
sparkgenerator(sparks7, sparky7, rememberburn7);
sparks7++;
if (sparks7 > 4)
{
  sparks7 = 0;
}

if (sparks8 == 0)
{
var sparks8rand = Math.round(getRandomArbitrary(240, 256));
rememberburn8 = sparks8rand;
sparky8 = sparks8rand;
}
sparkgenerator(sparks8, sparky8, rememberburn8);
sparks8++;
if (sparks8 > 4)
{
  sparks8 = 0;
}
}



}} //endoflog



var breaky = 0;
var breakym = 0;
var breakyadjust = 60;
var breakr = 0;
var breakl = 0;
var maxz = Math.round(getRandomArbitrary(1,3));

function fireDepth() {


if ( forrev == 0)
{
if (tr1 < maxz)	
{
tr1++;
}
if (tr2 < maxz && tr1 == maxz)
{
tr2++;
}
if (tr3 < maxz && tr2 == maxz)
{
tr3++;
}
if (tr4 < maxz && tr3 == maxz)
{
tr4++;
}
if (tr4 == maxz)
forrev = 1;
}
// reverse

// # zzzz he

if ( forrev == 1)
{
if (tr5 < maxz)	
{
tr5++;
}
if (tr6 < maxz && tr5 == maxz)
{
tr6++;
}
if (tr7 < maxz && tr6 == maxz)
{
tr7++;
}
if (tr8 < maxz && tr7 == maxz)
{
tr8++;
}
if (tr8 == maxz)
forrev = 3;
}
// reverse

// # zzzz he3

if ( forrev == 3)
{
if (tr9 < maxz)	
{
tr9++;
}
if (tr10 < maxz && tr9 == maxz)
{
tr10++;
}
if (tr11 < maxz && tr10 == maxz)
{
tr11++;
}
if (tr12 < maxz && tr11 == maxz)
{
tr12++;
}
if (tr12 == maxz)
forrev = 5;
}

// # zzzz herf

if ( forrev == 5)
{
if (tr13 < maxz)	
{
tr13++;
}
if (tr14 < maxz && tr13 == maxz)
{
tr14++;
}
if (tr15 < maxz && tr14 == maxz)
{
tr15++;
}
if (tr16 < maxz && tr15 == maxz)
{
tr16++;
}
if (tr16 == maxz)
forrev = 6;
}
// reversesuper
if (forrev == 6)
{
if (tr1 > 0)	
{
tr1--;
}
if (tr2 > 0 && tr1 == 0)
{
tr2--;
}
if (tr3 > 0 && tr2 == 0)
{
tr3--;
}
if (tr4 > 0 && tr3 == 0)
{
tr4--;
}
if (tr4 == 0)
forrev = 7;
}

// reversesuper
if (forrev == 7)
{
if (tr5 > 0)	
{
tr5--;
}
if (tr6 > 0 && tr5 == 0)
{
tr6--;
}
if (tr7 > 0 && tr6 == 0)
{
tr7--;
}
if (tr8 > 0 && tr7 == 0)
{
tr8--;
}
if (tr8 == 0)
forrev = 8;
}

// reversesuper
if (forrev == 8)
{
if (tr9 > 0)	
{
tr9--;
}
if (tr10 > 0 && tr9 == 0)
{
tr10--;
}
if (tr11 > 0 && tr10 == 0)
{
tr11--;
}
if (tr12 > 0 && tr11 == 0)
{
tr12--;
}
if (tr12 == 0)
forrev = 9;
}

if (forrev == 9)
{
if (tr13 > 0)	
{
tr13--;
}
if (tr14 > 0 && tr13 == 0)
{
tr14--;
}
if (tr15 > 0 && tr14 == 0)
{
tr15--;
}
if (tr16 > 0 && tr15 == 0)
{
tr16--;
}
if (tr16 == 0)
forrev = 0;
}


}
var lightswitch = 0;
var lightmodz= 0;
function lighting() {
	lightmodz++;
	if (lightmodz > 320)
	lightmodz = 0;
	if ( lightswitch == 0)
	{
    if (lightmodz == 320)
	lights--;
	if (lights < -5)
	lightswitch = 1;
	}
	if ( lightswitch == 1)
	{
    if (lightmodz == 320)
	lights++;
	if (lights > 5)
	lightswitch = 0;
	}
	}
function fireplaceDraw() {
	


 breakr = 0;
	for (var x = 0; x < 16; x ++) {
	  breaky = 0;
	  breakl = 0;
		for (var y = 0; y < 16; y ++) {
			var id = fireplaceArray[(y << 4) + x];
			var id2 = fireplaceArray[(y << 4) + x];
		
           sidek = 0;



            


            var woodshade1 = 24 + 0;
            var woodsat1 = "50%";
            var woodbri1= (6  + lights) + "%";		
   
            var woodshade2 = 25 + 0;
            var woodsat2= "51%";
            var woodbri2= (7 + lights) + "%";		

            var woodshade3 = 29 + 0;
            var woodsat3 = "52%";
            var woodbri3= (8 + lights) + "%";		


            var woodshade4 = 35 + 0;
            var woodsat4 = "53%";
            var woodbri4= (9 + lights) + "%";		         
            
            
               var woodshade1x = 24 + 0;
            var woodsat1x = "54%";
            var woodbri1x= (12  + lights) + "%";		
   
            var woodshade2x = 25 + 0;
            var woodsat2x= "55%";
            var woodbri2x= (13 + lights) + "%";		

            var woodshade3x = 29 + 0;
            var woodsat3x = "56%";
            var woodbri3x= (14 + lights) + "%";		


            var woodshade4x = 35 + 0;
            var woodsat4x = "57%";
            var woodbri4x= (15 + lights) + "%";		                
            
            
            // front log
            
            var woodshade1z = 24 + 0;
            var woodsat1z = "50%";
            var woodbri1z= (18 + lights) + "%";		
   
            var woodshade2z = 25 + 0;
            var woodsat2z= "51%";
            var woodbri2z= (19 + lights) + "%";		

            var woodshade3z = 29 + 0;
            var woodsat3z = "52%";
            var woodbri3z= (20 + lights) + "%";		


            var woodshade4z = 35 + 0;
            var woodsat4z = "53%";
            var woodbri4z= (21 + lights) + "%";		         
            
            
               var woodshade1xz = 24 + 0;
            var woodsat1xz = "54%";
            var woodbri1xz= (22 + lights) + "%";		
   
            var woodshade2xz = 25 + 0;
            var woodsat2xz= "55%";
            var woodbri2xz= (23 + lights) + "%";		

            var woodshade3xz = 29 + 0;
            var woodsat3xz = "56%";
            var woodbri3xz= (24 + lights) + "%";		


            var woodshade4xz = 35 + 0;
            var woodsat4xz = "57%";
            var woodbri4xz= (25 + lights) + "%";		          
            
            
			var hues = ['0', '21', '20', '10', '0', '29', '34', '', '', '', '', woodshade1x, woodshade2x, woodshade3x, woodshade4x, woodshade1, woodshade2, woodshade3, woodshade4, shade8, shade1, shade2, shade3, shade4, shade5, shade6,shade7, shade9, woodshade1xz, woodshade2xz, woodshade3xz, woodshade4xz, woodshade1z, woodshade2z, woodshade3z, woodshade4z, '22', '19','22', '22', '22', '22', '22', '24', '22', '19','23', '24', '22', '18', '25']; 
			var sats = ['0%', '100%', '100%', '100%', '0%', '100%', '100%', '', '', '', '', woodsat1x, woodsat2x,woodsat3x,woodsat4x,  woodsat1, woodsat2, woodsat3, woodsat4, sat8, sat1, sat2, sat3, sat4, sat5, sat6,sat7, sat9,  woodsat1xz, woodsat2xz,woodsat3xz,woodsat4xz,  woodsat1z, woodsat2z, woodsat3z, woodsat4z, '51%', '58%' ,'54%' , '56%', '55%','55%','55%', '55%', '51%', '58%' ,'54%' , '56%', '51%','55%', '55%'];
		  fireplaceColors = ['0%', '0%', '0%', '0%', '100%', '50%', '50%', '', '', '', '', woodbri1x, woodbri2x, woodbri3x, woodbri4x, woodbri1, woodbri2, woodbri3, woodbri4, bri8, bri1, bri2, bri3, bri4, bri5, bri6,bri7, bri9,  woodbri1xz, woodbri2xz, woodbri3xz, woodbri4xz, woodbri1z, woodbri2z, woodbri3z, woodbri4z, '14%', '8%', '4%', '11%', '4%', '4%','4%', '4%', '7%', '4%', '6%', '5%', '6%', '4%', '4%'];
		  modalpha=['0', '0', '0', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'];
      var modhue = "";
      var modsats = "";
      var modlight = "";
      var originalhue = hues[id];
      var originalsats = sats[id];
      var alphacast = modalpha[id];
      var originallightness = fireplaceColors[id];
		  modhue = originalhue;
		  modsats = originalsats;
      modlight = originallightness;		  
      /*
      if (y == 0)
      {
      var modl = originallightness.replace("%", "");
      var modl2 = parseInt(modl) - 30;
		  modlight = modl2.toString() + "%";
      }
      if (y == 1)
      {
      var modl = originallightness.replace("%", "");
      var modl2 = parseInt(modl) - 24;
		  modlight = modl2.toString() + "%";
      }
      if (y == 2)
      {
      var modl = originallightness.replace("%", "");
      var modl2 = parseInt(modl) - 18;
		  modlight = modl2.toString() + "%";
      }
      if (y == 3)
      {
      var modl = originallightness.replace("%", "");
      var modl2 = parseInt(modl) - 12;
		  modlight = modl2.toString() + "%";
      }
      if (y == 4)
      {
      var modl = originallightness.replace("%", "");
      var modl2 = parseInt(modl) - 6;
		  modlight = modl2.toString() + "%";
      }*/
 /*
  
      if (y == breaky)
      { 

           if (breaky > -1)
      {

      modhue = originalhue  - (72 - (y * 4));
      modsats = originalsats;
      var modl = originallightness.replace("%", "");
      var modl2 = parseInt(modl);
		  modlight = modl2.toString() + "%";
      }
      if (breaky < 7)
      {

      modhue = modhue;
      modsats = originalsats;
      var modl = originallightness.replace("%", "");
      var modl2 = parseInt(modl) - (52 - breaky * 8);
		  modlight = modl2.toString() + "%";
      }	  
	   	}	
	   if (x < 3 && breaky > 9)
      {

      modhue = originalhue  - (32 - (x * 2));
      modsats = originalsats;
      var modl = originallightness.replace("%", "");
      var modl2 = parseInt(modl);
		  modlight = modl2.toString() + "%";
      }
	   if (x > 13 && breaky > 9)
      {

      modhue = originalhue  - ((x * 2));
      modsats = originalsats;
      var modl = originallightness.replace("%", "");
      var modl2 = parseInt(modl);
		  modlight = modl2.toString() + "%";
      }	   	
      

	     */

			ctx.fillStyle = 'hsla(' + modhue+	','+ modsats +', ' + modlight + ',' + alphacast + ')';
			ctx.fillRect(x * poligon, y * poligon, poligon + 1, poligon + 1);
		    
     
		}

	}
}
/*
x = player.x / player.width * canvas.width;
y = player.y / player.height * canvas.height;
*/


window.getDevicePixelRatio = function () {
    var ratio = 1;
    // To account for zoom, change to use deviceXDPI instead of systemXDPI
    if (window.screen.systemXDPI !== undefined && window.screen.logicalXDPI       !== undefined && window.screen.systemXDPI > window.screen.logicalXDPI) {
        // Only allow for values > 1
        ratio = window.screen.systemXDPI / window.screen.logicalXDPI;
    }
    else if (window.devicePixelRatio !== undefined) {
        ratio = window.devicePixelRatio;
    }
    return ratio;
};


function drawLoop() {
var abswidth = window.innerWidth;
var absheight = window.innerHeight;
var wi = window.screen.width;
var he = window.screen.height;

//start horizontal
if (absheight < abswidth)
{
poligon = absheight / 16;



ctx.canvas.width = absheight;
ctx.canvas.height = absheight;



//ctx.clearRect(0, 0, display.width, display.height);
//document.getElementById('pixelsvg').setAttribute("height", wi);

//var c = ' crt';
//cnv.className = cnv.className + c;
}

//start vertical

if (absheight > abswidth)
{


ctx.canvas.width = abswidth;
ctx.canvas.height = abswidth;
poligon = abswidth / 16;


//var c = ' crt';
//cnv.className = cnv.className + c;
}
  



	fireplaceMove();
	fireplaceDraw();

	


//


};

fps = 1;

var t;

function frame() {
 //window.clearTimeout(t);
 //clearTimeout(t);
setInterval(()=> {
	ctx.clearRect(0, 0, display.width, display.height);
	reqAniFrame(drawLoop);
}, 90);





  // Let the host app know
  window.androidWallpaperInterface.drawFrame();

}


function xpi() {


    
    xp++;
    if (xp > 3)
    {
    xp=0;
    }
    
            shade8= palettenames1[xp][0];
        	sat8 = palettenames2[xp][0];
            bri8 = palettenames3[xp][0];
         
            shade1 = palettenames1[xp][1];
        	sat1 = palettenames2[xp][1];
            bri1 = palettenames3[xp][1];
        
        
			shade2 = palettenames1[xp][2];
			sat2 = palettenames2[xp][2];
		    bri2 = palettenames3[xp][2];
			
			shade3 = palettenames1[xp][3];
		    sat3 = palettenames2[xp][3];
			bri3 =  palettenames3[xp][3];
			
			
		   shade4 = palettenames1[xp][4];
		   sat4 = palettenames2[xp][4];
		   bri4 =   palettenames3[xp][4];	
		
			shade5 = palettenames1[xp][5];
			sat5 = palettenames2[xp][5];
			bri5 =  palettenames3[xp][5];
			
			
		    shade6 = palettenames1[xp][6];
		    sat6 = palettenames2[xp][6];
	        bri6 =  palettenames3[xp][6];
		  

           shade7 = palettenames1[xp][7];
           sat7 = palettenames2[xp][7];
           bri7 = palettenames3[xp][7];
                
            shade9= palettenames1[xp][8];
        	sat9 = palettenames2[xp][8];
            bri9 = palettenames3[xp][8];
};

xpi();







</script>
<script>





frame();
</script>

 <script>

const overdriveproc =`




// TODO: HOW CAN THE AUDIO WORKLET BE AWARE OF SAMPLE RATE? currently using sampleRate, but not sure it knows what that is!
// TODO: SENDING ONLY FIRST INDEX OF PARAMETER ARRAY BECAUSE DON'T REALLY KNOW HOW TO IMPLEMENT IT! 

const TWO_PI = 6.28318530717958647693;
const map = (value, in_min, in_max, out_min, out_max) => (value - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
let currentNoise = 0;
const generateNewNoise = () => currentNoise = Math.random() * 2 - 1;

class Biquad
{
  constructor(type = "lowpass")
  {
    this.type = type;
    this.a0 = 1.0;
    this.a1 = 0.0;
    this.a2 = 0.0;
    this.b1 = 0.0;
    this.b2 = 0.0;
    this.Fc = 0.50;
    this.Q = 0.707;
    this.peakGain = 0.0;
    this.z1 = 0.0;
    this.z2 = 0.0;
    this.calcBiquad();
}

setFreq(freq)
{
    this.Fc = freq;
    this.calcBiquad();
}

setBiquad(type, freq, Q, peakGainDB)
{
    this.type = type;
    this.Fc = freq;
    this.Q = Q;
    this.peakGain = peakGainDB;
    this.calcBiquad();
}

calcBiquad()
{
    this.norm;
    this.V = Math.pow(10, Math.abs(this.peakGain) / 20.0);
    this.K = Math.tan(Math.PI * this.Fc);
    switch (this.type) {
        case "lowpass":
        this.norm = 1 / (1 + this.K / this.Q + this.K * this.K);
        this.a0 = this.K * this.K * this.norm;
        this.a1 = 2 * this.a0;
        this.a2 = this.a0;
        this.b1 = 2 * (this.K * this.K - 1) * this.norm;
        this.b2 = (1 - this.K / this.Q + this.K * this.K) * this.norm;
        break;

        case "highpass":
        this.norm = 1 / (1 + this.K / this.Q + this.K * this.K);
        this.a0 = 1 * this.norm;
        this.a1 = -2 * this.a0;
        this.a2 = this.a0;
        this.b1 = 2 * (this.K * this.K - 1) * this.norm;
        this.b2 = (1 - this.K / this.Q + this.K * this.K) * this.norm;
        break;

        case "bandpass":
        this.norm = 1 / (1 + this.K / this.Q + this.K * this.K);
        this.a0 = this.K / this.Q * this.norm;
        this.a1 = 0;
        this.a2 = -this.a0;
        this.b1 = 2 * (this.K * this.K - 1) * this.norm;
        this.b2 = (1 - this.K / this.Q + this.K * this.K) * this.norm;
        break;

        case "notch":
        this.norm = 1 / (1 + this.K / this.Q + this.K * this.K);
        this.a0 = (1 + this.K * this.K) * this.norm;
        this.a1 = 2 * (this.K * this.K - 1) * this.norm;
        this.a2 = this.a0;
        this.b1 = this.a1;
        this.b2 = (1 - this.K / this.Q + this.K * this.K) * this.norm;
        break;

        case "peak":
            if (this.peakGain >= 0) {    // boost
                this.norm = 1 / (1 + 1/this.Q * this.K + this.K * this.K);
                this.a0 = (1 + this.V/this.Q * this.K + this.K * this.K) * this.norm;
                this.a1 = 2 * (this.K * this.K - 1) * this.norm;
                this.a2 = (1 - this.V/this.Q * this.K + this.K * this.K) * this.norm;
                this.b1 = this.a1;
                this.b2 = (1 - 1/this.Q * this.K + this.K * this.K) * this.norm;
            }
            else {    // cut
                this.norm = 1 / (1 + this.V/this.Q * this.K + this.K * this.K);
                this.a0 = (1 + 1/this.Q * this.K + this.K * this.K) * this.norm;
                this.a1 = 2 * (this.K * this.K - 1) * this.norm;
                this.a2 = (1 - 1/this.Q * this.K + this.K * this.K) * this.norm;
                this.b1 = this.a1;
                this.b2 = (1 - this.V/this.Q * this.K + this.K * this.K) * this.norm;
            }
            break;
            case "lowshelf":
            if (this.peakGain >= 0) {    // boost
                this.norm = 1 / (1 + Math.sqrt(2) * this.K + this.K * this.K);
                this.a0 = (1 + Math.sqrt(2*this.V) * this.K + this.V * this.K * this.K) * this.norm;
                this.a1 = 2 * (this.V * this.K * this.K - 1) * this.norm;
                this.a2 = (1 - Math.sqrt(2*this.V) * this.K + this.V * this.K * this.K) * this.norm;
                this.b1 = 2 * (this.K * this.K - 1) * this.norm;
                this.b2 = (1 - Math.sqrt(2) * this.K + this.K * this.K) * this.norm;
            }
            else {    // cut
                this.norm = 1 / (1 + Math.sqrt(2*this.V) * this.K + this.V * this.K * this.K);
                this.a0 = (1 + Math.sqrt(2) * this.K + this.K * this.K) * this.norm;
                this.a1 = 2 * (this.K * this.K - 1) * this.norm;
                this.a2 = (1 - Math.sqrt(2) * this.K + this.K * this.K) * this.norm;
                this.b1 = 2 * (this.V * this.K * this.K - 1) * this.norm;
                this.b2 = (1 - Math.sqrt(2*this.V) * this.K + this.V * this.K * this.K) * this.norm;
            }
            break;
            case "highshelf":
            if (this.peakGain >= 0) {    // boost
                this.norm = 1 / (1 + Math.sqrt(2) * this.K + this.K * this.K);
                this.a0 = (this.V + Math.sqrt(2*this.V) * this.K + this.K * this.K) * this.norm;
                this.a1 = 2 * (this.K * this.K - this.V) * this.norm;
                this.a2 = (this.V - Math.sqrt(2*this.V) * this.K + this.K * this.K) * this.norm;
                this.b1 = 2 * (this.K * this.K - 1) * this.norm;
                this.b2 = (1 - Math.sqrt(2) * this.K + this.K * this.K) * this.norm;
            }
            else {    // cut
                this.norm = 1 / (this.V + Math.sqrt(2*this.V) * this.K + this.K * this.K);
                this.a0 = (1 + Math.sqrt(2) * this.K + this.K * this.K) * this.norm;
                this.a1 = 2 * (this.K * this.K - 1) * this.norm;
                this.a2 = (1 - Math.sqrt(2) * this.K + this.K * this.K) * this.norm;
                this.b1 = 2 * (this.K * this.K - this.V) * this.norm;
                this.b2 = (this.V - Math.sqrt(2*this.V) * this.K + this.K * this.K) * this.norm;
            }
            break;
        }
    }

    process(inValue) {
        let outValue = inValue * this.a0 + this.z1;
        this.z1 = inValue * this.a1 + this.z2 - this.b1 * outValue;
        this.z2 = inValue * this.a2 - this.b2 * outValue;
        return outValue;
    }
}

class Glide
{
  constructor()
  {
    this.a = 0.0;
    this.b = 0.0;
    this.z = 0.0;
}

init(startValue, glideTimeMS, sampleRate)
{
    this.z = startValue;
    // set coefficients
    this.a = Math.exp(-TWO_PI / (glideTimeMS * 0.001 * sampleRate));
    this.b = 1.0 - this.a;
} 

process(targetValue)
{
    this.z = (targetValue * this.b) + (this.z * this.a);
    return this.z;
}
}

class Roaring
{
  constructor()
  {
    this.gain = 1;
    this.noiseSeed = 1;

    this.bandPass = new Biquad();
    this.lop = new Biquad();
    this.lop2 = new Biquad();
    this.hip = new Biquad();

    this.bandPass.setBiquad("bandpass", 30 / sampleRate, 1.5, 2);
    this.lop.setBiquad("lowpass", 800 / sampleRate, 0.707, 2);
    this.lop2.setBiquad("lowpass", 2875 / sampleRate, 0.707, 2);
    this.hip.setBiquad("highpass", 30 / sampleRate, 0.707, 2);
}

setSize(value)
    { // value between 0 - 1
        // this.gain = Math.pow(value, 2.0);
        this.boomAmount = map(value, 0.0, 1.0, 100.0, 30.0);
        this.hip.setFreq(this.boomAmount/sampleRate);
        this.bandPass.setFreq(this.boomAmount/sampleRate);
        this.lopFreq = map(Math.pow(value, 2.5), 0.0, 1.0, 10.0, 800.0);
        this.lop.setFreq(this.lopFreq/sampleRate);
        this.noiseSeed = map(value, 0.0, 1.0, 0.02, 1.0);
    }

  generate(size = 1) // generate one sample of data
  {
    // adjust to size
    this.boomAmount = map(size, 0.0, 1.0, 100.0, 30.0);
        this.hip.setFreq(this.boomAmount/sampleRate);
        this.bandPass.setFreq(this.boomAmount/sampleRate);
        this.lopFreq = map(Math.pow(size, 2.5), 0.0, 1.0, 10.0, 800.0);
        this.lop.setFreq(this.lopFreq/sampleRate);
        this.noiseSeed = map(size, 0.0, 1.0, 0.02, 1.0);

    // noise1 wants to be EITHER +1 or -1
    this.noise1 = (Math.random() >= 0.5) * 2 - 1;
    this.noise2 = currentNoise;

    this.noise2 *= this.noiseSeed;

    this.noise2 = this.lop.process(this.noise2);

    this.noiseCombined = (this.noise1 * 0.5) * (this.noise2 * 0.5);1
    this.noiseCombined = this.bandPass.process(this.noiseCombined) * 40;
    this.noiseCombined = this.lop2.process(this.noiseCombined);

    this.output = this.hip.process(this.noiseCombined) * this.gain;

    return this.output;
}

}

class Hissing
{
  constructor()
  {
    this.gain = 1;
    this.noiseSeed = 1;

    this.lop = new Biquad();
    this.shelf = new Biquad();

    this.lop.setBiquad("lowpass", 100 / sampleRate, 2, 2);
    this.shelf.setBiquad("highshelf", 2000 / sampleRate, 0, 15);
}

setSize(value)
    { // value between 0 - 1
       // this.gain = Math.pow(value, 2.7); // was 1.2
        this.lopFreq = map(value, 0.0, 1.0, 10, 100.0);
        this.lop.setFreq(this.lopFreq/ sampleRate);
        this.noiseSeed = map(value, 0.0, 1.0, 0.02, 1.0);
    }

  generate(size = 1) // generate one sample of hiss
  {
        // adjust to size
        this.lopFreq = map(size, 0.0, 1.0, 10, 100.0);
        this.lop.setFreq(this.lopFreq/ sampleRate);
        this.noiseSeed = map(size, 0.0, 1.0, 0.02, 1.0);

      // noise2 wants to be EITHER +1 or -1
      this.noise1 = currentNoise;
      this.noise2 = (Math.random() >= 0.5) * 2 - 1;

      this.noise2 *= this.noiseSeed;

      // filter noise2
      this.noise2 = this.lop.process(this.noise2);

      this.noise2 * this.noise2 * this.noise2 * this.noise2;

          // multiply and set final volume
          this.output = (this.shelf.process(this.noise1 * this.noise2) * 0.04) * this.gain; // 0.04 used to be 0.08

          return this.output;
      }

  }

  class Crackling
  {
      constructor()
      {
        this.gain = 1;
        this.crackleAmount = 0.99975;
        this.env = new Glide();
        this.bandPass = new Biquad();
        this.lop = new Biquad();

        this.bandPass.setBiquad("bandpass", 1650 / sampleRate, 1.5, 2);
        this.lop.setBiquad("lowpass", 8200 / sampleRate, 0.707, 0);
    }

    setSize(value)
    {
        // this.gain = Math.pow(value, 0.5); 
        this.crackleAmount = map(Math.pow(value, 1.5), 0.0, 1.0, 1.0, 0.99975);
    }

  generate(size = 1) // generate one sample of crackle
  {
    // THIS WILL GENERATE MONO CRACKLES, BUT REALLY WE WANT TO THINK ABOUT MAKING LIKE A PARTICLE GENERATOR CLASS
    // THAT SPITS OUT A RANDOM CRACKLE IN A RANDOM PAN POSITION AT A RANDOM TIME

        // adjust to size
        this.crackleAmount = map(Math.pow(size, 1.5), 0.0, 1.0, 1.0, 0.99975);

        // calc per sample noise
        this.noise = currentNoise;

        if (this.noise > this.crackleAmount)
        {
          this.randomEnvTime = (Math.random() * 30) + 60;
          this.randomBandPassFreq = map(Math.random(), 0.0, 1.0, 1500.0, 16500.0);
          this.bandPass.setFreq(this.randomBandPassFreq / sampleRate);
          this.env.init(1, this.randomEnvTime, sampleRate);
      }

      this.noise = this.bandPass.process(this.noise);

      this.noise *= this.env.process(0);

        // take the high end off, to make it not sound like rain splatter
        this.noise = this.lop.process(this.noise);

        this.noise *= 0.1 * this.gain; // was also a '* 0.1' before

        return this.noise;
    }

}

class FireNoiseGenerator extends AudioWorkletProcessor
{

  constructor()
  {
    super();
    this.roaring = new Roaring();
    this.hissing = new Hissing();
    this.crackling = new Crackling();
}   

    static get parameterDescriptors()
    {
        return [{ name: 'size', defaultValue: 1}];
    }


process(inputs, outputs, parameters) {
    // INFO: outputs[devices][channel][frame]

    // grab parameter data
    const size = parameters.size;

    // loop through every frame
    for (let frame = 0; frame < outputs[0][0].length; ++frame)
    {
      // generate one random sample data and use that as the base for all DSP in this block
      // the three DSP algorithms will then just call on that variable rather than generating a new one (or more) every sample!
      generateNewNoise();

      let roar = this.roaring.generate(size[0]);
      let hiss = this.hissing.generate(size[0]);
      let crackle = this.crackling.generate(size[0]);

      let data = crackle;

      // write out data
      for (let channel = 0; channel < outputs[0].length; ++channel)
      {
        outputs[0][channel][frame] = data;
    }
}

    // return true to keep alive
    return true;
}
}



registerProcessor('fire-noise-generator', FireNoiseGenerator);
`;
</script>

<script>
var once=0;

 window.addEventListener( 'click', () => { 
  
if (once == 0)
{
const audioContext = new AudioContext();
  let noiseGenerator; // in the global scope for use elsewhere in the code

  let isPlaying = false;
  const startAudioWorkletSound = async (context) =>
  {
    isPlaying = true; // used to only have the button trigger this once
       await context.audioWorklet.addModule('data:text/javascript,'+encodeURI(overdriveproc));

    noiseGenerator = new AudioWorkletNode(context, 'fire-noise-generator');

    // Create a compressor node
    var compressor = context.createDynamicsCompressor();
    compressor.threshold.value = -50;
    compressor.knee.value = 40;
    compressor.ratio.value = 20;
    compressor.attack.value = 0.1;
    compressor.release.value = 0.25;

    let convolver = context.createConvolver();
    convolver.buffer = impulseResponse(0.05, 2, 1);

    let gainNode = context.createGain();
    gainNode.gain.value = 0.3;

    noiseGenerator.connect(gainNode).connect(compressor).connect(context.destination);
    noiseGenerator.connect(convolver).connect(compressor);

    context.resume();
  };

// create an artificial impulse response
  function impulseResponse( duration, decay, reverse ) {
    var sampleRate = audioContext.sampleRate;
    var length = sampleRate * duration;
    var impulse = audioContext.createBuffer(2, length, sampleRate);
    var impulseL = impulse.getChannelData(0);
    var impulseR = impulse.getChannelData(1);

    if (!decay)
        decay = 2.0;
    for (var i = 0; i < length; i++){
      var n = reverse ? length - i : i;
      impulseL[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);
      impulseR[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);
    }
    return impulse;
}

function setSize()
{
  let sizeParam = context.parameters.get('size');
  sizeParam.value = 1;
}
startAudioWorkletSound(audioContext)
once=1;
}
}); 
</script>
</body>
</html>
